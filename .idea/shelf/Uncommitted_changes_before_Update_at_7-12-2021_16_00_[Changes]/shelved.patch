Index: database.php
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?php\r\nfunction connectToDatabase() {\r\n    $Connection = null;\r\n    mysqli_report(MYSQLI_REPORT_ERROR | MYSQLI_REPORT_STRICT); // Set MySQLi to throw exceptions\r\n    try {\r\n        $Connection = mysqli_connect(\"127.0.0.1\", \"root\", \"root\", \"nerdygadgets\");\r\n        mysqli_set_charset($Connection, 'latin1');\r\n        $DatabaseAvailable = true;\r\n    } catch (mysqli_sql_exception $e) {\r\n        $DatabaseAvailable = false;\r\n    }\r\n    if (!$DatabaseAvailable) {\r\n        ?><p1>Ik kan helaas niet verbinden met de website, probeer het later nog een keer.</p1><?php\r\n        die();\r\n    }\r\n\r\n    return $Connection;\r\n}\r\nfunction getHeaderStockGroups($databaseConnection) {\r\n    $Query = \"\r\n                SELECT StockGroupID, StockGroupName, ImagePath\r\n                FROM stockgroups \r\n                WHERE StockGroupID IN (\r\n                                        SELECT StockGroupID \r\n                                        FROM stockitemstockgroups\r\n                                        ) AND ImagePath IS NOT NULL\r\n                ORDER BY StockGroupID ASC\";\r\n    $Statement = mysqli_prepare($databaseConnection, $Query);\r\n    mysqli_stmt_execute($Statement);\r\n    $HeaderStockGroups = mysqli_stmt_get_result($Statement);\r\n    return $HeaderStockGroups;\r\n}\r\n\r\nfunction getStockGroups($databaseConnection) {\r\n    $Query = \"\r\n            SELECT StockGroupID, StockGroupName, ImagePath\r\n            FROM stockgroups \r\n            WHERE StockGroupID IN (\r\n                                    SELECT StockGroupID \r\n                                    FROM stockitemstockgroups\r\n                                    ) AND ImagePath IS NOT NULL\r\n            ORDER BY StockGroupID ASC\";\r\n    $Statement = mysqli_prepare($databaseConnection, $Query);\r\n    mysqli_stmt_execute($Statement);\r\n    $Result = mysqli_stmt_get_result($Statement);\r\n    $StockGroups = mysqli_fetch_all($Result, MYSQLI_ASSOC);\r\n    return $StockGroups;\r\n}\r\n\r\nfunction getStockItem($id, $databaseConnection) {\r\n    $Result = null;\r\n\r\n    $Query = \" \r\n           SELECT SI.StockItemID, \r\n            (RecommendedRetailPrice*(1+(TaxRate/100))) AS SellPrice, \r\n            StockItemName,\r\n            CONCAT('Voorraad: ',QuantityOnHand)AS QuantityOnHand,\r\n            SearchDetails, \r\n            (CASE WHEN (RecommendedRetailPrice*(1+(TaxRate/100))) > 50 THEN 0 ELSE 6.95 END) AS SendCosts, MarketingComments, CustomFields, SI.Video,\r\n            (SELECT ImagePath FROM stockgroups JOIN stockitemstockgroups USING(StockGroupID) WHERE StockItemID = SI.StockItemID LIMIT 1) as BackupImagePath   \r\n            FROM stockitems SI \r\n            JOIN stockitemholdings SIH USING(stockitemid)\r\n            JOIN stockitemstockgroups ON SI.StockItemID = stockitemstockgroups.StockItemID\r\n            JOIN stockgroups USING(StockGroupID)\r\n            WHERE SI.stockitemid = ?\r\n            GROUP BY StockItemID\";\r\n\r\n    $Statement = mysqli_prepare($databaseConnection, $Query);\r\n    mysqli_stmt_bind_param($Statement, \"i\", $id);\r\n    mysqli_stmt_execute($Statement);\r\n    $ReturnableResult = mysqli_stmt_get_result($Statement);\r\n    if ($ReturnableResult && mysqli_num_rows($ReturnableResult) == 1) {\r\n        $Result = mysqli_fetch_all($ReturnableResult, MYSQLI_ASSOC)[0];\r\n    }\r\n\r\n    return $Result;\r\n}\r\n\r\nfunction getStockItemImage($id, $databaseConnection) {\r\n\r\n    $Query = \"\r\n                SELECT ImagePath\r\n                FROM stockitemimages \r\n                WHERE StockItemID = ?\";\r\n\r\n    $Statement = mysqli_prepare($databaseConnection, $Query);\r\n    mysqli_stmt_bind_param($Statement, \"i\", $id);\r\n    mysqli_stmt_execute($Statement);\r\n    $R = mysqli_stmt_get_result($Statement);\r\n    $R = mysqli_fetch_all($R, MYSQLI_ASSOC);\r\n\r\n    return $R;\r\n}\r\n\r\nfunction getItemDetails($id,$databaseConnection) {\r\n    $query = \"\r\n                    SELECT SI.StockItemID, SI.StockItemName, SI.MarketingComments, TaxRate, RecommendedRetailPrice,\r\n                    ROUND(SI.TaxRate * SI.RecommendedRetailPrice  / 100 + SI.RecommendedRetailPrice,2) as SellPrice,\r\n                    QuantityOnHand,\r\n                    (SELECT ImagePath FROM stockitemimages WHERE StockItemID  = SI.StockItemID  LIMIT 1) as ImagePath,\r\n                    (SELECT ImagePath FROM stockgroups JOIN stockitemstockgroups USING(StockGroupID) WHERE StockGroupID = SI.StockItemID LIMIT 1) as BackupImagePath\r\n                    FROM stockitems AS SI\r\n                    JOIN stockitemholdings SIH USING(stockitemid)\r\n                    JOIN stockitemstockgroups USING(StockItemID)\r\n                    JOIN stockgroups ON stockitemstockgroups.StockGroupID = stockgroups.StockGroupID\r\n                    WHERE SI.StockItemID = $id\r\n                    GROUP BY StockItemID\";\r\n\r\n    $statement = mysqli_prepare($databaseConnection, $query);\r\n    mysqli_stmt_execute($statement);\r\n    $output = mysqli_stmt_get_result($statement);\r\n    $output = mysqli_fetch_all($output,MYSQLI_ASSOC);\r\n\r\n    return $output[0];\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/database.php b/database.php
--- a/database.php	(revision ee23149b292efd5847d6e8cfb5db58b8132aa34b)
+++ b/database.php	(date 1638888523464)
@@ -3,7 +3,7 @@
     $Connection = null;
     mysqli_report(MYSQLI_REPORT_ERROR | MYSQLI_REPORT_STRICT); // Set MySQLi to throw exceptions
     try {
-        $Connection = mysqli_connect("127.0.0.1", "root", "root", "nerdygadgets");
+        $Connection = mysqli_connect("127.0.0.1", "root", "", "nerdygadgets");
         mysqli_set_charset($Connection, 'latin1');
         $DatabaseAvailable = true;
     } catch (mysqli_sql_exception $e) {
